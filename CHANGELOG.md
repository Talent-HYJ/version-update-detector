# Changelog

## [1.1.2] - 2025-12-05

### 修复
- 修复可见性检测节流机制 bug：在 5 分钟内频繁切换页面时不再重复触发检测
- 添加 `isVisibilityChecking` 标志，防止检测进行中时重复触发
- 优化时间戳更新逻辑，确保在检测开始前就更新时间戳

### 优化
- **生产构建优化**：生产环境打包时自动移除所有 console 语句
- 为所有构建（ESM、CommonJS、UMD）添加代码压缩和优化
- 新增 `build:dev` 脚本用于开发构建（保留 console 用于调试）

## [1.1.1] - 2025-12-05

### 新增
- 添加 `visibilityCheckInterval` 配置项，用于控制页面可见性变化时的检测间隔（默认 5 分钟）
- 支持自定义可见性检测间隔时间

### 优化
- **性能优化**：页面不可见时自动停止定时版本检测，节省系统资源
- **智能检测**：页面从不可见变为可见时，自动重新启动定时检测
- **节流机制**：添加可见性检测节流逻辑，只有距离上次检测超过配置间隔时才会立即检测，避免频繁检测
- 优化 `startVersionCheck()` 方法，避免在可见性变化时重复设置首次延迟检测

### 使用示例

```typescript
// 使用默认配置（可见性检测间隔为5分钟）
const detector = new VersionDetector();

// 自定义可见性检测间隔为10分钟
const detector = new VersionDetector({
  visibilityCheckInterval: 10 * 60 * 1000 // 10分钟
});
```

## [1.1.0] - 2025-XX-XX

### 功能
- 初始版本发布
- 版本检测功能
- 更新通知功能

